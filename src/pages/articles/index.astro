---
import Layout from "../../layouts/Global.astro";
import { getArticles } from "../../utils/getArticles.ts";
import dayjs from "dayjs";
import customParseFormat from "dayjs/plugin/customParseFormat";
import ArticleCard from "../../components/ArticleCard.astro";
dayjs.extend(customParseFormat);

const articles = await getArticles();

// Parse the date of each article, sort by date descending and return an array of the 4 last articles
/* const sortedArticle = articles
  .map((article) => {
    const { title, date, description, image } = article.frontmatter;
    return {
      title,
      date: dayjs(date, "DD-MM-YYYY").format("YYYY-MM-DD"),
      description,
      url: article.url,
      image: image,
    };
  })
  .sort((a, b) => {
    return dayjs(b.date).diff(dayjs(a.date));
  }); */
---

<Layout
  title="Julien"
  description="I'm Julien. I occasionnaly publish articles about programming and tech."
>
  <h2 class="text-base md:text-xl mb-4 max-w-fit text-white/90">
    My last articles
  </h2>
  <div class="flex flex-wrap gap-3">
    {articles.map((article) => <ArticleCard article={article} />)}
  </div>
</Layout>

<style>
  .article {
    transition: transform 0.15s ease-in-out;
  }
</style>
